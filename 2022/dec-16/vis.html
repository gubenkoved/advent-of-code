
<html>
<head>
    <script src="https://unpkg.com/force-graph"></script>
</head>
<body>
<div id="target"></div>
<script>
    const nodes = JSON.parse("[{\"id\": \"JI\", \"flow_rate\": 21, \"color\": \"red\", \"text\": \"JI (21)\"}, {\"id\": \"DM\", \"flow_rate\": 3, \"color\": \"red\", \"text\": \"DM (3)\"}, {\"id\": \"AZ\", \"flow_rate\": 0, \"color\": \"green\", \"text\": \"AZ (0)\"}, {\"id\": \"YQ\", \"flow_rate\": 0, \"color\": \"green\", \"text\": \"YQ (0)\"}, {\"id\": \"WI\", \"flow_rate\": 0, \"color\": \"green\", \"text\": \"WI (0)\"}, {\"id\": \"NE\", \"flow_rate\": 0, \"color\": \"green\", \"text\": \"NE (0)\"}, {\"id\": \"FM\", \"flow_rate\": 0, \"color\": \"green\", \"text\": \"FM (0)\"}, {\"id\": \"QI\", \"flow_rate\": 0, \"color\": \"green\", \"text\": \"QI (0)\"}, {\"id\": \"OY\", \"flow_rate\": 0, \"color\": \"green\", \"text\": \"OY (0)\"}, {\"id\": \"XS\", \"flow_rate\": 18, \"color\": \"red\", \"text\": \"XS (18)\"}, {\"id\": \"NU\", \"flow_rate\": 0, \"color\": \"green\", \"text\": \"NU (0)\"}, {\"id\": \"JX\", \"flow_rate\": 0, \"color\": \"green\", \"text\": \"JX (0)\"}, {\"id\": \"WT\", \"flow_rate\": 23, \"color\": \"red\", \"text\": \"WT (23)\"}, {\"id\": \"KM\", \"flow_rate\": 0, \"color\": \"green\", \"text\": \"KM (0)\"}, {\"id\": \"NG\", \"flow_rate\": 0, \"color\": \"green\", \"text\": \"NG (0)\"}, {\"id\": \"FJ\", \"flow_rate\": 0, \"color\": \"green\", \"text\": \"FJ (0)\"}, {\"id\": \"QR\", \"flow_rate\": 0, \"color\": \"green\", \"text\": \"QR (0)\"}, {\"id\": \"KI\", \"flow_rate\": 9, \"color\": \"red\", \"text\": \"KI (9)\"}, {\"id\": \"ON\", \"flow_rate\": 0, \"color\": \"green\", \"text\": \"ON (0)\"}, {\"id\": \"AW\", \"flow_rate\": 0, \"color\": \"green\", \"text\": \"AW (0)\"}, {\"id\": \"HI\", \"flow_rate\": 0, \"color\": \"green\", \"text\": \"HI (0)\"}, {\"id\": \"XG\", \"flow_rate\": 0, \"color\": \"green\", \"text\": \"XG (0)\"}, {\"id\": \"II\", \"flow_rate\": 19, \"color\": \"red\", \"text\": \"II (19)\"}, {\"id\": \"VC\", \"flow_rate\": 24, \"color\": \"red\", \"text\": \"VC (24)\"}, {\"id\": \"VJ\", \"flow_rate\": 0, \"color\": \"green\", \"text\": \"VJ (0)\"}, {\"id\": \"IZ\", \"flow_rate\": 0, \"color\": \"green\", \"text\": \"IZ (0)\"}, {\"id\": \"EJ\", \"flow_rate\": 0, \"color\": \"green\", \"text\": \"EJ (0)\"}, {\"id\": \"DU\", \"flow_rate\": 12, \"color\": \"red\", \"text\": \"DU (12)\"}, {\"id\": \"ZK\", \"flow_rate\": 10, \"color\": \"red\", \"text\": \"ZK (10)\"}, {\"id\": \"XF\", \"flow_rate\": 25, \"color\": \"red\", \"text\": \"XF (25)\"}, {\"id\": \"LC\", \"flow_rate\": 4, \"color\": \"red\", \"text\": \"LC (4)\"}, {\"id\": \"SV\", \"flow_rate\": 0, \"color\": \"green\", \"text\": \"SV (0)\"}, {\"id\": \"LF\", \"flow_rate\": 0, \"color\": \"green\", \"text\": \"LF (0)\"}, {\"id\": \"DI\", \"flow_rate\": 0, \"color\": \"green\", \"text\": \"DI (0)\"}, {\"id\": \"OP\", \"flow_rate\": 0, \"color\": \"green\", \"text\": \"OP (0)\"}, {\"id\": \"NQ\", \"flow_rate\": 0, \"color\": \"green\", \"text\": \"NQ (0)\"}, {\"id\": \"QJ\", \"flow_rate\": 0, \"color\": \"green\", \"text\": \"QJ (0)\"}, {\"id\": \"IY\", \"flow_rate\": 22, \"color\": \"red\", \"text\": \"IY (22)\"}, {\"id\": \"AJ\", \"flow_rate\": 0, \"color\": \"green\", \"text\": \"AJ (0)\"}, {\"id\": \"TE\", \"flow_rate\": 11, \"color\": \"red\", \"text\": \"TE (11)\"}, {\"id\": \"ZZ\", \"flow_rate\": 0, \"color\": \"green\", \"text\": \"ZZ (0)\"}, {\"id\": \"VT\", \"flow_rate\": 0, \"color\": \"green\", \"text\": \"VT (0)\"}, {\"id\": \"OL\", \"flow_rate\": 0, \"color\": \"green\", \"text\": \"OL (0)\"}, {\"id\": \"TC\", \"flow_rate\": 0, \"color\": \"green\", \"text\": \"TC (0)\"}, {\"id\": \"TL\", \"flow_rate\": 0, \"color\": \"green\", \"text\": \"TL (0)\"}, {\"id\": \"QT\", \"flow_rate\": 0, \"color\": \"green\", \"text\": \"QT (0)\"}, {\"id\": \"BY\", \"flow_rate\": 0, \"color\": \"green\", \"text\": \"BY (0)\"}, {\"id\": \"OV\", \"flow_rate\": 0, \"color\": \"green\", \"text\": \"OV (0)\"}, {\"id\": \"VN\", \"flow_rate\": 0, \"color\": \"green\", \"text\": \"VN (0)\"}, {\"id\": \"VF\", \"flow_rate\": 13, \"color\": \"red\", \"text\": \"VF (13)\"}, {\"id\": \"BD\", \"flow_rate\": 17, \"color\": \"red\", \"text\": \"BD (17)\"}, {\"id\": \"UG\", \"flow_rate\": 0, \"color\": \"green\", \"text\": \"UG (0)\"}, {\"id\": \"PF\", \"flow_rate\": 0, \"color\": \"green\", \"text\": \"PF (0)\"}, {\"id\": \"RR\", \"flow_rate\": 0, \"color\": \"green\", \"text\": \"RR (0)\"}, {\"id\": \"AA\", \"flow_rate\": 0, \"color\": \"green\", \"text\": \"AA (0)\"}, {\"id\": \"JW\", \"flow_rate\": 0, \"color\": \"green\", \"text\": \"JW (0)\"}]");
    const links = JSON.parse("[{\"source\": \"JI\", \"target\": \"WI\"}, {\"source\": \"JI\", \"target\": \"XG\"}, {\"source\": \"DM\", \"target\": \"JX\"}, {\"source\": \"DM\", \"target\": \"NG\"}, {\"source\": \"DM\", \"target\": \"AW\"}, {\"source\": \"DM\", \"target\": \"BY\"}, {\"source\": \"DM\", \"target\": \"PF\"}, {\"source\": \"AZ\", \"target\": \"FJ\"}, {\"source\": \"AZ\", \"target\": \"VC\"}, {\"source\": \"YQ\", \"target\": \"TE\"}, {\"source\": \"YQ\", \"target\": \"OP\"}, {\"source\": \"WI\", \"target\": \"JI\"}, {\"source\": \"WI\", \"target\": \"VC\"}, {\"source\": \"NE\", \"target\": \"ZK\"}, {\"source\": \"NE\", \"target\": \"AA\"}, {\"source\": \"FM\", \"target\": \"LC\"}, {\"source\": \"FM\", \"target\": \"DU\"}, {\"source\": \"QI\", \"target\": \"TE\"}, {\"source\": \"QI\", \"target\": \"JW\"}, {\"source\": \"OY\", \"target\": \"XS\"}, {\"source\": \"OY\", \"target\": \"VF\"}, {\"source\": \"XS\", \"target\": \"RR\"}, {\"source\": \"XS\", \"target\": \"OY\"}, {\"source\": \"XS\", \"target\": \"SV\"}, {\"source\": \"XS\", \"target\": \"NQ\"}, {\"source\": \"NU\", \"target\": \"IZ\"}, {\"source\": \"NU\", \"target\": \"BD\"}, {\"source\": \"JX\", \"target\": \"DM\"}, {\"source\": \"JX\", \"target\": \"ZK\"}, {\"source\": \"WT\", \"target\": \"OV\"}, {\"source\": \"WT\", \"target\": \"QJ\"}, {\"source\": \"KM\", \"target\": \"TE\"}, {\"source\": \"KM\", \"target\": \"OL\"}, {\"source\": \"NG\", \"target\": \"II\"}, {\"source\": \"NG\", \"target\": \"DM\"}, {\"source\": \"FJ\", \"target\": \"AZ\"}, {\"source\": \"FJ\", \"target\": \"II\"}, {\"source\": \"QR\", \"target\": \"ZK\"}, {\"source\": \"QR\", \"target\": \"KI\"}, {\"source\": \"KI\", \"target\": \"ZZ\"}, {\"source\": \"KI\", \"target\": \"DI\"}, {\"source\": \"KI\", \"target\": \"TL\"}, {\"source\": \"KI\", \"target\": \"AJ\"}, {\"source\": \"KI\", \"target\": \"QR\"}, {\"source\": \"ON\", \"target\": \"LC\"}, {\"source\": \"ON\", \"target\": \"QT\"}, {\"source\": \"AW\", \"target\": \"DM\"}, {\"source\": \"AW\", \"target\": \"AA\"}, {\"source\": \"HI\", \"target\": \"TE\"}, {\"source\": \"HI\", \"target\": \"VC\"}, {\"source\": \"XG\", \"target\": \"II\"}, {\"source\": \"XG\", \"target\": \"JI\"}, {\"source\": \"II\", \"target\": \"LF\"}, {\"source\": \"II\", \"target\": \"NG\"}, {\"source\": \"II\", \"target\": \"OL\"}, {\"source\": \"II\", \"target\": \"FJ\"}, {\"source\": \"II\", \"target\": \"XG\"}, {\"source\": \"VC\", \"target\": \"WI\"}, {\"source\": \"VC\", \"target\": \"HI\"}, {\"source\": \"VC\", \"target\": \"AZ\"}, {\"source\": \"VJ\", \"target\": \"UG\"}, {\"source\": \"VJ\", \"target\": \"AA\"}, {\"source\": \"IZ\", \"target\": \"VF\"}, {\"source\": \"IZ\", \"target\": \"NU\"}, {\"source\": \"EJ\", \"target\": \"ZK\"}, {\"source\": \"EJ\", \"target\": \"LC\"}, {\"source\": \"DU\", \"target\": \"TC\"}, {\"source\": \"DU\", \"target\": \"UG\"}, {\"source\": \"DU\", \"target\": \"FM\"}, {\"source\": \"ZK\", \"target\": \"JX\"}, {\"source\": \"ZK\", \"target\": \"EJ\"}, {\"source\": \"ZK\", \"target\": \"JW\"}, {\"source\": \"ZK\", \"target\": \"QR\"}, {\"source\": \"ZK\", \"target\": \"NE\"}, {\"source\": \"XF\", \"target\": \"OP\"}, {\"source\": \"XF\", \"target\": \"VT\"}, {\"source\": \"LC\", \"target\": \"FM\"}, {\"source\": \"LC\", \"target\": \"EJ\"}, {\"source\": \"LC\", \"target\": \"ON\"}, {\"source\": \"LC\", \"target\": \"AJ\"}, {\"source\": \"LC\", \"target\": \"PF\"}, {\"source\": \"SV\", \"target\": \"XS\"}, {\"source\": \"SV\", \"target\": \"IY\"}, {\"source\": \"LF\", \"target\": \"II\"}, {\"source\": \"LF\", \"target\": \"OV\"}, {\"source\": \"DI\", \"target\": \"KI\"}, {\"source\": \"DI\", \"target\": \"BY\"}, {\"source\": \"OP\", \"target\": \"YQ\"}, {\"source\": \"OP\", \"target\": \"XF\"}, {\"source\": \"NQ\", \"target\": \"TC\"}, {\"source\": \"NQ\", \"target\": \"XS\"}, {\"source\": \"QJ\", \"target\": \"VT\"}, {\"source\": \"QJ\", \"target\": \"WT\"}, {\"source\": \"IY\", \"target\": \"SV\"}, {\"source\": \"AJ\", \"target\": \"LC\"}, {\"source\": \"AJ\", \"target\": \"KI\"}, {\"source\": \"TE\", \"target\": \"QI\"}, {\"source\": \"TE\", \"target\": \"HI\"}, {\"source\": \"TE\", \"target\": \"KM\"}, {\"source\": \"TE\", \"target\": \"YQ\"}, {\"source\": \"ZZ\", \"target\": \"KI\"}, {\"source\": \"ZZ\", \"target\": \"AA\"}, {\"source\": \"VT\", \"target\": \"XF\"}, {\"source\": \"VT\", \"target\": \"QJ\"}, {\"source\": \"OL\", \"target\": \"KM\"}, {\"source\": \"OL\", \"target\": \"II\"}, {\"source\": \"TC\", \"target\": \"NQ\"}, {\"source\": \"TC\", \"target\": \"DU\"}, {\"source\": \"TL\", \"target\": \"VF\"}, {\"source\": \"TL\", \"target\": \"KI\"}, {\"source\": \"QT\", \"target\": \"AA\"}, {\"source\": \"QT\", \"target\": \"ON\"}, {\"source\": \"BY\", \"target\": \"DM\"}, {\"source\": \"BY\", \"target\": \"DI\"}, {\"source\": \"OV\", \"target\": \"LF\"}, {\"source\": \"OV\", \"target\": \"WT\"}, {\"source\": \"VN\", \"target\": \"RR\"}, {\"source\": \"VN\", \"target\": \"BD\"}, {\"source\": \"VF\", \"target\": \"OY\"}, {\"source\": \"VF\", \"target\": \"IZ\"}, {\"source\": \"VF\", \"target\": \"TL\"}, {\"source\": \"BD\", \"target\": \"NU\"}, {\"source\": \"BD\", \"target\": \"VN\"}, {\"source\": \"UG\", \"target\": \"VJ\"}, {\"source\": \"UG\", \"target\": \"DU\"}, {\"source\": \"PF\", \"target\": \"LC\"}, {\"source\": \"PF\", \"target\": \"DM\"}, {\"source\": \"RR\", \"target\": \"XS\"}, {\"source\": \"RR\", \"target\": \"VN\"}, {\"source\": \"AA\", \"target\": \"QT\"}, {\"source\": \"AA\", \"target\": \"ZZ\"}, {\"source\": \"AA\", \"target\": \"AW\"}, {\"source\": \"AA\", \"target\": \"VJ\"}, {\"source\": \"AA\", \"target\": \"NE\"}, {\"source\": \"JW\", \"target\": \"ZK\"}, {\"source\": \"JW\", \"target\": \"QI\"}]");

    const targetDiv = document.getElementById("target");
    const myGraph = new ForceGraph(targetDiv)
        .graphData({
            nodes,
            links,
        })
        .nodeCanvasObject((node, ctx, globalScale) => {
          const label = node.text;
          const fontSize = 12/globalScale;
          ctx.font = `${fontSize}px Sans-Serif`;
          const textWidth = ctx.measureText(label).width;
          const bckgDimensions = [textWidth, fontSize].map(n => n + fontSize * 0.2); // some padding

          ctx.fillStyle = 'rgba(255, 255, 255, 0.8)';
          ctx.fillRect(node.x - bckgDimensions[0] / 2, node.y - bckgDimensions[1] / 2, ...bckgDimensions);

          ctx.textAlign = 'center';
          ctx.textBaseline = 'middle';
          ctx.fillStyle = node.color;
          ctx.fillText(label, node.x, node.y);

          node.__bckgDimensions = bckgDimensions; // to re-use in nodePointerAreaPaint
        })
        .nodePointerAreaPaint((node, color, ctx) => {
          ctx.fillStyle = color;
          const bckgDimensions = node.__bckgDimensions;
          bckgDimensions && ctx.fillRect(node.x - bckgDimensions[0] / 2, node.y - bckgDimensions[1] / 2, ...bckgDimensions);
        });
</script>
</body>
</html>
